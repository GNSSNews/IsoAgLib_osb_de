/*! \page PageTechInfo Technical Information

INCLUDE_doc/txt/mainHeaderWithNavbar.txt_INCLUDE

<table class="infobox" border="0">
<tr><th>Section Overview</th></tr>
<tr><td>The following parts are described on the respective pages:
    <ul>
    <li> \ref InfGeneralInformation </li>
    <li> \ref StructuralOverview </li>
    <li> \ref InfAgentNetwork </li>
    <li> \ref InfServiceNetwork </li>
    </ul>
</td></tr>
</table>

<div style="clear:left"></div>

\section InfGeneralInformation General Information
The \isoaglib was primarily developed for massive automatic process data recording within the research group
<a href="http://www.tec.wzw.tum.de/pflanztech/englisch/forschung/forschung.html">IKB-D&uuml;rnast</a>
Since publication of this project it is used for:
- Implement Indicator (IMI) which detects working state dependent on configuration and tractor base data information (LBS-Base) and records process data:
    - working state
    - working width
    - working time
    - working distance
    - working area
    - whole time
    - whole distance
    - IMI for transport work, where no working width and area are point of interest
    - simulated tractor which sets LBS-Base data according to settings of analog sensor inputs 
      and sends them on BUS, and which manages measuring programs for IMIs dependent on digital inputs (switch)
- Task Controller which retrieves GPS information from a Fieldstar (TM) terminal, combines them
    with dynamic detected process data of pre configured IMI types and polls the information
    via RS232 to a PC or PCMCIA Flashdisk in simple table format. Last but not least it measures the hitch force
    (with sensors of EHR) and the fuel consumption and polls them, too. The Task Controller
    detects dependent on GPS, if the actual position is in one of the configured (EEPROM)
    areas of type mounting, transport or field. With this it can gather the information
    for each area type in its own subset.

The <b>main basic design principles</b> of the \isoaglib are:
- use Hardware-Adaptation-Layer to restrict hardware dependent parts, to
  ease adaptation to different ECU types
- use hardware independent Communication-Layer, which implements all interaction via ISO11783
- very capable and flexible "Licensing"design -&gt; e.g. it can handle received setpoints from a group of
  different senders, so that the maiservice_network_connection application can decide, which sender to accept
- modularized structure to ease source code administration and to enable de/activation of
  specific function groups (e.g. RS232, sensor, actor)

The \isoaglib version <b>1.0.0rc1</b> was running stable already and has been used for the
<a href="http://www.fritzmeier.com/engl/frameset_engl.htm?/engl/environment/environment_miniveg.htm">Chlorophyll Sensor MiniVeg N</a>
of the manufacturer <a href="http://www.fritzmeier.de">Fritzmeier</a>. It was verified with automated tests, that the final device
is fitting to all defined requirements and therefore the \isoaglib did at least provide a robust correct function for this application.

In case the \isoaglib would suffer some problems for other applications, you can be sure that the author
<a href="mailto:Achim.Spangler_at_osb-ag:de">Achim Spangler</a> maintains this project actively.

\section StructuralOverview Structural Overview

\subsection StructureModularity Modular Design
The \isoaglib is modularized according to the different
ISO11783 functional components.  Only a small number of modules is
necessary for all systems, so that an individual project can adapt
capabilities and Flash ROM size to its specific needs.

\subsection StructureLayers Layered Design
The \isoaglib is designed to be easily adapted to new
hardware platforms.  The majority of the software can be used without any
changes on all platforms.  The more this common software part is used,
the better its quality will get.

The layered structure is described by the following diagram:

<!-- 
  THE LINKED PAGES NEED TO BE MODIFIED MANUALLY AS IT IS NOT (YET) POSSIBLE IN DOXYGEN 
  TO REFERENCE JUST THE LINK ADDRESS TO A PAGE WITHOUT ACTUALLY CREATING THE LINK!
  So it could be useful to use the dot creation tool first and then copy the proper urls 
  manually from the generated page.
  The graphic was exported from the OpenOffice Draw document admin/graphics/structure.odd
-->
\htmlonly
<img src="Images/structure.png" usemap="#structure" alt="Structural Overview" border="0">
<br><small>additional information can be accessed by clicking on the respective area in the image</small>
<map name="structure">
    <area shape="rect" coords=" 20, 38,131, 94" href="CommOverPage.html" alt="Communication Services for ISO 11783" title="Communication Services for ISO 11783">
    <!--<area shape="rect" coords="183, 21,218,169" href="" alt="Scheduler" title="Scheduler">-->
    <area shape="rect" coords="228, 38,318, 94" href="DataLinkPage.html" alt="Part 3: Data Link" title="Part 3: Data Link">
    <area shape="rect" coords="341, 38,433, 94" href="NetworkMgmtPage.html" alt="Part 5: Network Management" title="Part 5: Network Management">    
    <area shape="rect" coords="455, 38,526, 94" href="XMLspec.html" alt="Part 6: ISO Virtual Terminal" title="Part 6: ISO Virtual Terminal">
    <area shape="rect" coords="548. 63,613, 94" href="AppLayerPage.html" alt="Part 7: Application Layer" title="Part 7: Application Layer">
    <area shape="rect" coords="613, 63,656, 94" href="ProcDataPage.html" alt="Part 7: Process Data" title="Part 7: Process Data">
    <!--<area shape="rect" coords="682, 38,755, 94" href="" alt="Part 10: Task Controller" title="Part 10: Task Controller">
        <area shape="rect" coords="776, 38,847, 94" href="" alt="Part 13: File Server" title="Part 13: File Server">
    -->

<!--<area shape="rect" coords=" 20,170,150,245" href="" alt="Provide Driver Features which are not part of most Platforms" title="Provide Driver Features which are not part of most Platforms">   -->
    <area shape="rect" coords="190,170,300,225" href="d3/db4/classIsoAgLib_1_1iSystem__c.html" alt="Common System Access (Globally Used)" title="Common System Access (Globally Used)">
    <area shape="rect" coords="323,170,416,227" href="d4/dca/classIsoAgLib_1_1iEepromIo__c.html" alt="EEPROM IO-STREAMS Like Read/Write Access" title="EEPROM IO-STREAMS Like Read/Write Access">
    <area shape="rect" coords="435,163,529,237" href="d9/dc6/classIsoAgLib_1_1iCanIo__c.html" alt="CAN individual mask/filter settings for each filterbox" title="CAN individual mask/filter settings for each filterbox">
    <area shape="rect" coords="550,152,641,244" href="d8/d6a/classIsoAgLib_1_1iRS232IO__c.html" alt="RS232 Supplementary Driver with IO STREAMS like read/write access" title="RS232 Supplementary Driver with IO STREAMS like read/write access">
    <area shape="rect" coords="663,154,754,244" href="dd/dc8/classIsoAgLib_1_1iAnalogIRangeCheck__c.html" alt="Sensor Supplementary Driver with Scaling and Range-Check" title="Sensor Supplementary Driver with Scaling and Range-Check">
    <area shape="rect" coords="776,153,867,242" href="da/d12/classIsoAgLib_1_1iDigitalO__c.html" alt="Actor Supplementary Driver with State Monitoring Functions" title="Actor Supplementary Driver with State Monitoring Functions">

    <area shape="rect" coords=" 19,321,170,397" href="MainHalPage.html" alt="Map Platform Specific API to Unique API for IsoAgLib (Mapping during compile-time -no runtime-overhead)" title="Map Platform Specific API to Unique API for IsoAgLib (Mapping during compile-time -no runtime-overhead)">
    <area shape="rect" coords="189,330,302,385" href="dc/db2/system_8h.html" alt="Common System Access (Watchdog,Time, ...)" title="Common System Access (Watchdog,Time, ...)">
    <area shape="rect" coords="323,330,415,385" href="d0/ded/eeprom_8h.html" alt="EEPROM (Store Process Data, SelfConf SA, ...)" title="EEPROM (Store Process Data, SelfConf SA, ...)">
    <area shape="rect" coords="437,330,532,385" href="d7/da8/can_8h.html" alt="CAN" title="CAN">
    <area shape="rect" coords="549,330,642,385" href="dd/d8b/rs232_8h.html" alt="RS232 Supplementary Driver" title="RS232 Supplementary Driver">    
    <area shape="rect" coords="663,330,755,385" href="d5/d2e/sensor_8h.html" alt="Sensor Supplementary Driver" title="Sensor Supplementary Driver">
    <area shape="rect" coords="776,330,866,385" href="df/d10/actor_8h.html" alt="Actor Supplementary Driver" title="Actor Supplementary Driver">

<!--<area shape="rect" coords="077,472,359,510" href="" alt="BIOS Collection of Low Level  Driver Libraries" title="BIOS Collection of Low Level  Driver Libraries">
    <area shape="rect" coords="529,473,811,510" href="" alt="RTOS Realtime Operating System" title="RTOS Realtime Operating System"> -->
</map>
\endhtmlonly
<!--

\dot
  digraph LayeredStructure {
    fontname=ARIALN;
    ranksep=1.0;
    fontpath="/usr/X11R6/lib/X11/fonts/drakfont/ttf:/usr/share/fonts/ttf:/usr/X11R6/lib/X11/fonts/TTF";
    node [shape=record, fontname=ARIALN, fontsize=9, style=filled, fontcolor=black];
    edge [fontname=ARIALN, fontsize=9, dir="back"];
    ordering=out;
    pack=true;

    upperRuler [ label="<p1>a|<p21>b|<p22>b|<p23>b|<p3>c|<p4>d|<p5>e", style=invis ];

    subgraph cluster_Communication {
        style="filled";
        label="Communication";
        bottomlabel="Communication Services for ISO 11783";
        bgcolor=grey;
        color="grey";
        rank=same;
        multi_msg       [label="Data Stream\n(needed for\nISO Terminal)", color="cyan4", URL="\ref MultiMsgPage", width=1.25 ];
        iso_term        [label="ISO Virtual\n(complete optional)", color="white", URL="\ref XMLspec", width=1.5 ];
        process         [label="Process Data\n(optional)", color="white", URL="\ref ProcDataPage", width=1.25 ];
        system_mgmt     [label="System Management\n(partly obligatory)", color="cyan2", URL="\ref SystemMgmtPage", width=1.5 ];
        base            [label="Base Data\n(complete optional)", color="white", URL="\ref AppLayerPage", width=1.5 ];
        comm_doc        [label="Communication Services\nfor ISO 11783", URL="\ref CommOverPage", width=1.5 ];
    }

    subgraph cluster_DriverExtensions {
        style="filled";
        label="Driver Extensions";
        bgcolor=grey;
        color="grey";
        rank=same;
        rs232_drv    [label="RS232\n Supplementary\nDriver with\nIOSTREAMS Like\nRead/Write\nAccess", color="white", URL="\ref IsoAgLib::iRS232IO_c"];
        sensor_drv   [label="Sensor\nSupplementary\nDriver with\nScaling and\nRange-Check", color="white", URL="\ref IsoAgLib::iAnalogIRangeCheck_c"];
        actor_drv    [label="Actor\nSupplementary\nDriver with\nState Monitoring\nFunctions", color="white", URL="\ref IsoAgLib::iDigitalO_c"];
        can_drv      [label="CAN\nIndividual Mask/\nFilter Settings\nfor each Filterbox", color="yellow", URL="\ref IsoAgLib::iCanIo_c"];
        eeprom_drv   [label="EEPROM\nIO-STREAMS Like\nRead/Write Access", color="yellow", URL="\ref IsoAgLib::iEepromIo_c"];
        common_drv   [label="Common System\nAccess\n(Globally Used)", color="yellow", URL="\ref IsoAgLib::iSystem_c"];
        drv_doc      [label="Provide Driver Features\nwhich are not part of\nmost Platforms"];
    }

    subgraph cluster_HAL {
        style="filled";
        label="HAL";
        color="grey";
        bgcolor=grey;
        rank=same;
        rs232_hal    [label="RS232\nSupplementary\nDriver", color="white", URL="\ref hal/rs232.h"];
        sensor_hal   [label="Sensor\nSupplementary\nDriver", color="white", URL="\ref hal/sensor.h"];
        actor_hal    [label="Actor\nSupplementary\nDriver", color="white", URL="\ref hal/actor.h"];
        can_hal      [label="CAN", color="dodgerblue3", URL="\ref hal/can.h"];
        eeprom_hal   [label="EEPROM\n(Store Process Data,\nSelfConf SA, ...)", color="dodgerblue3", URL="\ref hal/eeprom.h"];
        common_hal   [label="Common\nSystem Access\n(Watchdog,Time, ...)", color="dodgerblue3", URL="\ref hal/system.h"];
        hal_doc      [label="Map Platform Specific\nAPI to Unique API\nfor IsoAgLib\n(Mapping during\ncompile-time -\nno runtime-overhead)",URL="\ref MainHalPage"];
    }

    subgraph cluster_Hardware {
        style="filled";
        label="Hardware";
        color="grey";
        bgcolor=grey;
        rank=same;
        bios      [ label="BIOS\nCollection of Low Level \nDriver Libraries", color="green2" ];
        place_hw  [ label="<p1>a|<p21>b|<p2>b|<p23>b|<p3>c|<p31>c1|<p32>c2|<p4>d|<p41>d1|<p42>d2|<p5>e|<p51>e1|<p52>e2|<p6>f|<p61>f1", style=invis ];
        rtos      [ label="RTOS\nRealtime Operating System", color="green2" ];
    }

    lowerRuler [ label="<p1>a|<p21>b|<p22>b|<p23>b|<p3>c|<p4>d|<p5>e|<p6>f", style=invis];

    upperRuler:p1 -> comm_doc [ style=invis, weight=6000 ];

    comm_doc      -> drv_doc [ style=invis, weight=6000 ];
    drv_doc       -> hal_doc [ style=invis, weight=6000 ];
    hal_doc       -> bios    [ style=invis, weight=6000 ];

    common_hal -> place_hw:p1 [ /*weight=4000*/ ];
    eeprom_hal -> place_hw:p2 [ /*weight=4000*/ ];
    can_hal    -> place_hw:p3 [ /*weight=1000*/ ];
    rs232_hal  -> place_hw:p4 [ /*weight=1000*/ ];
    sensor_hal -> place_hw:p5 [ /*weight=1000*/ ];
    actor_hal  -> place_hw:p6 [ /*weight=1000*/];

    bios -> lowerRuler:p1      [ style=invis/*, weight=3000*/ ];
    place_hw -> lowerRuler:p23 [ style=invis/*, weight=3000*/ ];
    rtos -> lowerRuler:p6      [ style=invis/*, weight=6000*/ ];

    system_mgmt -> common_drv [ style=invis/*, weight=2000 */ ];
    process     -> eeprom_drv [ style=invis/*, weight=2000 */ ];
    base        -> can_drv    [ style=invis/*, weight=2000 */ ];
    iso_term    -> rs232_drv  [ style=invis/*, weight=2000 */ ];
    multi_msg   -> actor_drv  [ style=invis/*, weight=2000 */];

    upperRuler:p21 -> system_mgmt [ style=invis/*, weight=2000 */ ];
    upperRuler:p22 -> process     [ style=invis/*, weight=2000 */ ];
    upperRuler:p23 -> base        [ style=invis/*, weight=2000 */ ];
    upperRuler:p3  -> iso_term    [ style=invis/*, weight=2000 */ ];
    upperRuler:p5  -> multi_msg   [ style=invis/*, weight=2000 */ ];

    process     -> eeprom_drv [ style="dotted"];
    system_mgmt -> can_drv    [ /*weight=1000, headport="nw", tailport="se"*/ ];
    process     -> can_drv    [ /*weight=1000*/ ];
    base        -> can_drv    [ /*weight=1000*/ ];
    iso_term    -> can_drv    [ /*weight=1000*/ ];
    multi_msg   -> can_drv    [ /*weight=1000*/ ];
    system_mgmt -> eeprom_drv [ style="dotted" ];
    common_drv  -> common_hal [ /*weight=3000*/ ];
    can_drv     -> can_hal    [ /*weight=3000*/];
    eeprom_drv  -> eeprom_hal [ /*weight=3000*/ ];
    rs232_drv   -> rs232_hal  [ /*weight=2000*/ ];
    sensor_drv  -> sensor_hal [ /*weight=2000*/ ];
    actor_drv   -> actor_hal  [ /*weight=2000*/ ];
}
\enddot
-->

\subsection StructObligatory Information on Mandatory Elements
The following elements are needed for all projects:
 - blue "HAL" layer nodes
 - yellow "Driver Extensions" layer nodes
 - cyan "Communication" layer nodes

The modularized principle ensures that the minimum footprint of the
\isoaglib in Flash ROM is quite low.

\subsection StructPartlyOptional Other Elements

The supplementary drivers for RS232, Sensor Input and Actuator Control
(mainly PWM) were developed for a research project at the Technical
University of Munich (TUM).



\section InfAgentNetwork Modelling as Network of Autonomous Agents

The targeted flexible network, where devices of different manufacturers,
models and built years are providing and using general services can be seen
as a network of partial autonomous agents. K&uuml;hnel establishes the following
criteria for the use of agents in the view of the whole system (book: "Agentenbasierte
Softwareentwicklung", A.: Ralf K&uuml;hnel, V.: Addison-Wesley):
- inherent&nbsp;distribution of data, competence and leadership
- existence&nbsp;of specific software for sub tasks which should be integrated
- complexity of algorithms which could be subdivided in distributed parts
- tough or impossible design of global control
Criteria for the modelling as agents are in the view of the single devices:- need for adaptation to frequently changing environments
- partial and possibly erroneous information about environment
- restricted prediction of environment
- possibility of environment&nbsp;changes which are only partially induced  by own activities
This matches the following properties of an ISO 11783 network:
- single devices (resp. their ECU) must have the competence and leadership for security relevant tasks
- controller software for single devices exists in many cases
- manufacturer of a device knows best, how construction independent information and work services can be realized by a specific machine
- global control would need a steadily increasing configuration management database to allow any desired combination of devices
- frequently change of the (network) environment
- a single implement or the tractor can't predict or control the work of the whole work combination
Therefore the \isoaglib provides the following services:<br>

<b>Knowledge Management System</b>
-# application can simply store and update local process data information
-# optional&nbsp;periodic store of actual value in EEPROM<br>
-# periodic or one time information requests from remote devices are handled in the background
-# capable support for one time or periodic information request (including request of MIN or MAX on specific trigger events)
-# several remote devices can independently reset the stored
   value, if they have registered a measuring program (time or distance proportional
   or value dependent triggered sending of values)<br>
-# process data can be flexible created or deleted during runtime to adapt to actual information needs
-# all information types are handled with the same API
-# each information type (e.g. application rate) is addressed by an unique identifier
   which contains the device type (e.g. spreader), mounting position and location
   in the device specific dictionary so that dynamic source address or protocol
   type (ISO 11783) is irrelevant for the application design<br></td></tr>

<b>Control Interaction</b>
-# API of each process data has subgroups for measurement information and work control
-# setpoints can be defined as exact values, MIN or MAX limits or intervals<br>
-# information if sent setpoint was answered with accept or reject (differentiated by reason)
-# information if previously rejected setpoint is still consistent with the actual measurement value<br>
-# parallel received setpoints for the same process data are distinguished by sender
   ident, so that selective accept and reject is possible
-# accepted setpoint sender is marked as MASTER, so that
   succeeding setpoints of the MASTER can be distinguished from setpoints of
   other devices
-# optional automatic information of setpoint MASTER, if actual measurement value exceeds the configurable admissible tolerance

\section InfServiceNetwork Service Network
The interactions between the devices of a ISO 11783 network can be modelled as
the providing and using of construction  independent services. This is illustrated
with the following diagrams.<br>
\image html Diagramme/service_network_connection.png
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>

The devices of this network are using and providing services as process data. The correct function of the elements is only
possible, if no device is dependent on a service of another not existent device.
<br clear="All">
<hr>
\image html Diagramme/service_network_conflict.png
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>Resource conflicts can occur, if several devices want to control the driving speed and RPM of PTO of the tractor.
Therefore each implement should avoid the sending of exact setpoints in favour of intervals.

<br clear="All">
<hr>
\image html Diagramme/service_network_flexibility.png
&nbsp;<br>
&nbsp;<br>
Several implements which want to control the work of the tractor are no problem, if they define intervals instead of
exact values. Additionally they should use process data which is as abstract as possible. <br>
The rotary harrow could define setpoints for driving speed and PTO (power take-off) of the tractor, so that the tractor would be fixed very tight to the needs
of this one implement. This wouldn't allow the fertilizer to control the driving speed.<br>
<br>
If the rotary harrow defines alternatively the relation between driving speed and PTO, the tractor can realize this
setting for different speeds (dependent on the transmission of the tractor). The tractor can
regard the setpoint from the fertilizer in this case.

*/
